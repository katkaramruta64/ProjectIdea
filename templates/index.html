<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project Idea Suggestion</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f9;
    }

    header {
      background: #333;
      color: white;
      padding: 15px;
      text-align: center;
    }

    nav {
      display: flex;
      justify-content: center;
      background: #444;
    }

    nav button {
      flex: 1;
      padding: 14px;
      border: none;
      outline: none;
      background: #444;
      color: white;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
    }

    nav button:hover {
      background: #666;
    }

    nav button.active {
      background: #007bff;
    }

    .tab-content {
      display: none;
      max-width: 900px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      box-shadow: 0px 2px 5px rgba(0,0,0,0.2);
      border-radius: 10px;
    }

    h2 {
      margin-bottom: 15px;
      color: #333;
    }

    .input-section {
      margin-bottom: 20px;
    }

    input[type="text"] {
      padding: 10px;
      width: 60%;
      margin-right: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button.action-btn {
      padding: 10px 15px;
      background: #007bff;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
    }

    button.action-btn:hover {
      background: #0056b3;
    }

  /* Result card */
.idea-card {
  border: 1px solid #e0e0e0;
  border-radius: 10px;
  padding: 18px;
  margin: 18px 0;
  background: #ffffff;
  box-shadow: 0 4px 8px rgba(0,0,0,0.08);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.idea-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.12);
}

/* Title */
.idea-card h3 a {
  color: #007bff;
  text-decoration: none;
  font-size: 20px;
}

.idea-card h3 a:hover {
  text-decoration: underline;
}

/* Abstract */
.abstract {
  margin: 12px 0;
  font-size: 14px;
  color: #444;
  line-height: 1.6;
  background: #f9f9f9;
  padding: 10px;
  border-left: 4px solid #6c757d;
  border-radius: 6px;
}

/* Suggested project idea */
.idea-highlight {
  background: linear-gradient(135deg, #fdfdfd, #f1f9ff);
  border-left: 5px solid #28a745;
  padding: 12px 15px;
  margin: 15px 0;
  border-radius: 8px;
  box-shadow: 0 3px 6px rgba(0,0,0,0.12);
  font-size: 15px;
  line-height: 1.5;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.idea-highlight strong {
  color: #007bff;
}

.idea-highlight b {
  color: #222;
  font-weight: 600;
}

/* Save button */
.save-btn {
  display: inline-block;
  margin-top: 10px;
  background: #007bff;
  color: #fff;
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.3s;
}

.save-btn:hover {
  background: #0056b3;
}
#pagination {
  display: flex;
  justify-content: center;   /* centers the buttons */
  gap: 15px;                 /* space between buttons */
  margin-top: 25px;
}

#pagination button {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  background: #007bff;
  color: #fff;
  font-size: 15px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.25s ease;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

#pagination button:hover:not(:disabled) {
  background: #0056b3;
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

#pagination button:active:not(:disabled) {
  transform: scale(0.96);
}

#pagination button:disabled {
  background: #ccc;
  cursor: not-allowed;
  box-shadow: none;
}

  </style>
</head>
<body>

  <header>
    <h1>Project Idea Suggestion System</h1>
  </header>

  <!-- Navigation Tabs -->
  <nav>
    <button class="tablink active" onclick="openTab(event, 'home')">Home</button>
    <button class="tablink" onclick="openTab(event, 'results')">Results</button>
    <button class="tablink" onclick="openTab(event, 'saved')">Saved Ideas</button>
    <button class="tablink" onclick="openTab(event, 'about')">About</button>
  </nav>

  <!-- Home Tab -->
  <div id="home" class="tab-content" style="display:block;">
    <h2>Search Research Papers</h2>
    <div class="input-section">
      <input type="text" id="query" placeholder="Enter keyword (e.g., AI, IoT, Healthcare)">
      <button class="action-btn" onclick="searchPapers()">Search</button>
    </div>
  </div>

  <!-- Results Tab -->
  <div id="results" class="tab-content">
    <h2>Suggested Ideas</h2>
    <div id="api-results"></div>
    <div id="pagination" style="display:none;">
      <button id="prevBtn" onclick="showPrev()">‚¨Ö Previous</button>
      <button id="nextBtn" onclick="showNext()">Next ‚û°</button>
    </div>
  </div>

  <!-- Saved Ideas Tab -->
  <div id="saved" class="tab-content">
    <h2>Saved Ideas</h2>
    <div id="saved-list"></div>
  </div>

  <!-- About Tab -->
  <div id="about" class="tab-content">
    <h2>About Us</h2>
    <p>At our platform, we believe that great ideas come from curiosity and research. That‚Äôs why we bring you innovative project suggestions directly inspired by the latest research papers. Our mission is to guide students, developers, and tech enthusiasts toward projects that are not only unique but also practical and impactful.

Whether you‚Äôre aiming for hackathons, academic excellence, or real-world applications, we make it easier to discover projects that challenge your skills and fuel your creativity. By connecting cutting-edge research with hands-on implementation, we help you turn abstract concepts into tangible solutions.

Our vision is to create a community of innovators who are constantly exploring, experimenting, and learning. With our platform, your next big idea is just a click away‚Äîget inspired, get creative, and make an impact in the world of technology.</div>

  <script>
    // --- Tab Switching ---
    function openTab(evt, tabName) {
      let tabcontent = document.getElementsByClassName("tab-content");
      for (let i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      let tablinks = document.getElementsByClassName("tablink");
      for (let i = 0; i < tablinks.length; i++) {
        tablinks[i].classList.remove("active");
      }
      document.getElementById(tabName).style.display = "block";
      evt.currentTarget.classList.add("active");
    }

    // --- API Search ---
    let allPapers = [];
    let currentIndex = 0;
    const pageSize = 5;

    async function searchPapers() {
  const query = document.getElementById("query").value || "ai";
  console.log("Searching for:", query);

  if (!navigator.onLine) {
    document.getElementById("api-results").innerHTML = `<p style="color:red;">‚ùå No internet</p>`;
    return;
  }

  try {
    const response = await fetch(`http://127.0.0.1:8000/get-papers?query=${query}`);
    console.log("Fetch response:", response);

    if (!response.ok) {
      throw new Error("Server error " + response.status);
    }

    const data = await response.json();
    console.log("Data from backend:", data);

    allPapers = data.papers || [];
    currentIndex = 0;

    if (allPapers.length === 0) {
      document.getElementById("api-results").innerHTML = `<p style="color:red;">‚ö†Ô∏è No papers found</p>`;
      return;
    }

    document.querySelector("button[onclick*='results']").click();
    showPage();

  } catch (err) {
    console.error("Error:", err);
    document.getElementById("api-results").innerHTML = `<p style="color:red;">‚ö†Ô∏è Failed to fetch papers</p>`;
  }
}


    function showPage() {
      const resultsDiv = document.getElementById("api-results");
      resultsDiv.innerHTML = "";

      const pagePapers = allPapers.slice(currentIndex, currentIndex + pageSize);

      if (pagePapers.length === 0) {
        resultsDiv.innerHTML = `<p style="color:red;text-align:center;">‚ö†Ô∏è No results to display</p>`;
        return;
      }

      pagePapers.forEach(paper => {
        const paperDiv = document.createElement("div");
        paperDiv.className = "idea-card";

        paperDiv.innerHTML = `
  <h3><a href="${paper.link}" target="_blank">${paper.title}</a></h3>

  <div class="abstract">
    <strong>Abstract:</strong> ${paper.summary}
  </div>

  <div class="idea-highlight">
    <strong>üí° Suggested Project Idea:</strong> <b>${paper.suggested_idea}</b>
  </div>

  <button class="save-btn" onclick="saveIdea('${encodeURIComponent(paper.title)}','${encodeURIComponent(paper.suggested_idea)}','${encodeURIComponent(paper.link)}')">Save</button>
`;

        resultsDiv.appendChild(paperDiv);
      });

      document.getElementById("pagination").style.display = "flex";
      document.getElementById("prevBtn").disabled = currentIndex === 0;
      document.getElementById("nextBtn").disabled = currentIndex + pageSize >= allPapers.length;
    }

    function showNext() {
      if (currentIndex + pageSize < allPapers.length) {
        currentIndex += pageSize;
        showPage();
      }
    }

    function showPrev() {
      if (currentIndex - pageSize >= 0) {
        currentIndex -= pageSize;
        showPage();
      }
    }

    // --- Save & Remove Ideas ---
    function saveIdea(title, idea, link) {
      title = decodeURIComponent(title);
      idea = decodeURIComponent(idea);
      link = decodeURIComponent(link);

      const savedList = document.getElementById("saved-list");

      const savedDiv = document.createElement("div");
      savedDiv.className = "idea-card";

      savedDiv.innerHTML = `
        <h3><a href="${link}" target="_blank">${title}</a></h3>
        <p>${idea}</p>
        <button class="action-btn remove-btn" onclick="this.parentElement.remove()">Remove</button>
      `;

      savedList.appendChild(savedDiv);
      document.querySelector("button[onclick*='saved']").click();
    }
  </script>
</body>
</html>
